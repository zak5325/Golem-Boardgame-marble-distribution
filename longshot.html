<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Long Shot: The Dice Game Monitoring</title>
    <!-- 视口设置，确保移动设备显示效果良好 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <!-- 引入全局的字体和样式 -->
    <link rel="stylesheet" href="golem_styles.css">
    <!-- 引入新的 CSS 文件 -->
    <link rel="stylesheet" href="longshot_styles.css">
    <!-- 添加一个用于检测屏幕方向的脚本 -->
    <script>
        function checkOrientation() {
            if (window.innerHeight > window.innerWidth) {
                // 如果是竖屏，显示提示
                document.getElementById('orientation-warning').style.display = 'flex';
            } else {
                // 如果是横屏，隐藏提示
                document.getElementById('orientation-warning').style.display = 'none';
            }
        }
        window.addEventListener('load', checkOrientation);
        window.addEventListener('resize', checkOrientation);
    </script>
</head>
<body>
    <!-- 添加一个用于提示用户旋转设备的遮罩层 -->
    <div id="orientation-warning">
        <div class="orientation-message">
            <p>Please rotate your device to landscape mode for the best experience.</p>
        </div>
    </div>

    <div class="container">
        <header>
            <h1>Long Shot: The Dice Game Monitoring</h1>
        </header>
        <main>
            <div class="content">
                <!-- 左半边：赛道进度 -->
                <div class="left">
                    <div id="raceTrack"></div>
                    <!-- 将重置按钮放在左下角 -->
                    <div class="reset-container">
                        <button id="resetButton">Reset</button>
                    </div>
                </div>
                <!-- 右半边：复选框和控件 -->
                <div class="right">
                    <!-- 右半边上半部分：复选框 -->
                    <div class="checkboxes" id="checkboxContainer"></div>
                    <!-- 右半边下半部分：控件 -->
                    <div class="controls">
                        <label for="horseSelect">Please choose the current activating horse</label>
                        <select id="horseSelect">
                            <option value="1">Horse 1</option>
                            <option value="2">Horse 2</option>
                            <option value="3">Horse 3</option>
                            <option value="4">Horse 4</option>
                            <option value="5">Horse 5</option>
                            <option value="6">Horse 6</option>
                            <option value="7">Horse 7</option>
                            <option value="8">Horse 8</option>
                        </select>
                        <div>
                            <button onclick="moveHorse(1)">Moving Number: 1</button>
                            <button onclick="moveHorse(2)">Moving Number: 2</button>
                            <button onclick="moveHorse(3)">Moving Number: 3</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        <footer>
            <p>&copy; 2024 Boardgame Tools</p>
            <a href="index.html" class="back-button">Back to Home</a>
        </footer>

        <!-- 脚本部分 -->
        <script>
            const horseCount = 8;
            const trackLength = 17; // 更新后的赛道长度
            let horsePositions = Array(horseCount).fill(0);
            let finishedHorses = [];
            let horsePlacings = {}; // 新增的对象，用于记录马匹名次

            // 确保在 DOM 加载完成后添加事件监听器
            document.addEventListener('DOMContentLoaded', function() {
                document.getElementById('resetButton').addEventListener('click', resetGame);
                initializeRaceTrack();
            });

            function initializeRaceTrack() {
                const raceTrack = document.getElementById('raceTrack');
                raceTrack.innerHTML = '';
                for (let i = 0; i < horseCount; i++) {
                    const trackContainer = document.createElement('div');
                    trackContainer.classList.add('track-container');

                    // 左箭头
                    const leftArrow = document.createElement('div');
                    leftArrow.classList.add('arrow-button');
                    leftArrow.innerHTML = '&#8592;';
                    leftArrow.onclick = () => moveHorseManual(i + 1, -1);
                    trackContainer.appendChild(leftArrow);

                    // 赛道和名次容器
                    const trackPlacingWrapper = document.createElement('div');
                    trackPlacingWrapper.classList.add('track-placing-wrapper');

                    // 赛道
                    const track = document.createElement('div');
                    track.classList.add('track');
                    track.id = `track-${i + 1}`;
                    for (let j = 0; j < trackLength; j++) {
                        const cell = document.createElement('div');
                        cell.classList.add('cell');
                        if (j === 0) {
                            cell.classList.add('post-bet-line'); // 起点为浅棕色
                        }
                        if (j === 1 || (j >= 2 && j <= 11)) {
                            cell.classList.add('pre-bet-line'); // 下注线之前的深棕色区域
                        }
                        if (j > 11) {
                            cell.classList.add('post-bet-line'); // 下注线之后的浅棕色区域
                        }
                        if (j === 11) {
                            cell.classList.add('bet-line');
                        }
                        if (j === 15) {
                            cell.classList.add('finish-line');
                        }
                        track.appendChild(cell);
                    }
                    trackPlacingWrapper.appendChild(track);

                    // 名次显示
                    const placingDisplay = document.createElement('div');
                    placingDisplay.classList.add('placing-display');
                    placingDisplay.id = `placing-${i + 1}`;
                    trackPlacingWrapper.appendChild(placingDisplay);

                    trackContainer.appendChild(trackPlacingWrapper);

                    // 右箭头
                    const rightArrow = document.createElement('div');
                    rightArrow.classList.add('arrow-button');
                    rightArrow.innerHTML = '&#8594;';
                    rightArrow.onclick = () => moveHorseManual(i + 1, 1);
                    trackContainer.appendChild(rightArrow);

                    raceTrack.appendChild(trackContainer);
                }
                initializeCheckboxes();
                updateRaceTrack();
            }

            // 其余的脚本代码保持不变
            // ...
        </script>
    </div>
</body>
</html>
